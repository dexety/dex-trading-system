\section{Индикаторы}

Для построения модели в катбусте мы использовали индикаторы, которые зависят от трэйдов в окне. Класс \href{https://github.com/dexety/dex-trading-system/blob/ca0370d602f2dfa05262b9b8574002f965ac1502/utils/indicators.py#L5}{\texttt{Indicators}} содержит функции, заполняющие значения фичей и столбца таргета: \texttt{fill\_features\_values} и \texttt{fill\_target\_values}.

\subsection{\href{https://github.com/dexety/dex-trading-system/blob/ca0370d602f2dfa05262b9b8574002f965ac1502/utils/indicators.py#L15}{\texttt{fill\_target\_values}}}

Функция принимает словарь для заполнения значений, два окна трэйдов и параметры ордеров \texttt{stop\_profit} и \texttt{stop\_loss}. Функция считает, исполнились бы эти ордеры и выставляет соответствующее значение в словарь для заполнения.

\subsection{\href{https://github.com/dexety/dex-trading-system/blob/ca0370d602f2dfa05262b9b8574002f965ac1502/utils/indicators.py#L48}{\texttt{fill\_features\_values}}}

\begin{designation}
Окно длины $t$ -- окно, в котором есть все трэйды, случившиеся за интервал времени длины $t$ секунд.
\end{designation}

Функция принимает словарь для заполнения, окно трэйдов, и два списка вариантов числовых параметров фичей $n$ и $t$. Функция заполняет словарь значениями фичей, которые представлены ниже:

\begin{itemize}
    \item \texttt{seconds\_since\_midnight} -- количество секунд с начала дня.
    \item \texttt{seconds\_since\_n\_trades\_ago} -- количество секунд, прошедших с первого трэйда в окне из $n$ последних трэйдов.
    \item \texttt{WI\_exp\_moving\_average} -- экспоненциальное среднее в окне длины $t$.
    \item \texttt{WI\_weighted\_moving\_average} -- взвешанное среднее в окне длины $t$.
    \item \texttt{WI\_trade\_amount} -- количество сделок в окне длины $t$.
    \item \texttt{WI\_trade\_volume} -- суммарный объем сделок в окне длины $t$.
    \item \texttt{WI\_open\_close\_diff} -- разница между ценой открытия и ценой закрытия в окне длины $t$.
    \item \texttt{WI\_stochastic\_oscillator} -- стохастический осцилятор. Рассчитывается по формуле $\frac{\texttt{CUR} - \texttt{MIN}}{\texttt{MAX} - \texttt{MIN}}$, где \texttt{CUR} - цена последней сделки, а \texttt{MIN} и \texttt{MAX} - наименьшая и наибольшая цена сделки соответственно в окне длины $t$.
\end{itemize}

Вторая фича зависит от значения $n$ и от направления трэйдов в окне, поэтому для каждой комбинации направления и параметра $n$ в таблице будет свой столбец.

Последние 5 фичей зависят от $t$ и от направления трэйдов в окне, поэтому для каждой комбинации направления, параметра $t$ и фичи в таблице будет свой столбец.